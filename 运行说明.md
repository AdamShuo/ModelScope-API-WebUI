# ModelScope API WebUI 运行说明

本项目提供了Windows和Linux两个平台的自动化启动脚本，可以自动激活虚拟环境并运行程序。

## Windows 用户

本项目提供了两个Windows批处理文件：

### 1. run_windows.bat（完整版）
**推荐首次使用**

#### 使用方法
双击运行 `run_windows.bat` 文件，或在命令提示符中执行：
```cmd
run_windows.bat
```

#### 脚本功能
- 自动检查并创建虚拟环境（如果不存在）
- 激活虚拟环境
- 安装项目依赖（requirements.txt）
- 后台启动 gradio_app.py 应用程序
- 等待8秒确保应用完全启动
- 自动打开浏览器并使用深色主题
- 显示中英文对照的操作提示
- 按任意键可安全退出应用

### 2. run_windows_existvenv.bat（快速版）
**适用于已有虚拟环境的情况**

#### 使用方法
双击运行 `run_windows_existvenv.bat` 文件，或在命令提示符中执行：
```cmd
run_windows_existvenv.bat
```

#### 脚本功能
- 直接激活现有虚拟环境
- 后台启动 gradio_app.py 应用程序
- 等待8秒确保应用完全启动
- 自动打开浏览器并使用深色主题
- 显示中英文对照的操作提示
- 按任意键可安全退出应用
- **注意**：此脚本假设虚拟环境已存在，不会创建新环境或安装依赖

## Linux/macOS 用户

### 首次使用
需要先设置脚本的可执行权限：
```bash
chmod +x run_linux.sh
```

### 使用方法
在终端中执行：
```bash
./run_linux.sh
```

### 脚本功能
- 自动检查并创建虚拟环境（如果不存在）
- 激活虚拟环境
- 安装项目依赖（requirements.txt）
- 后台启动 gradio_app.py 应用程序
- 等待8秒确保应用完全启动
- 自动打开浏览器并使用深色主题
- 显示中英文对照的操作提示
- 按 Ctrl+C 可安全退出应用

## 脚本选择建议

### Windows用户
- **首次使用**：选择 `run_windows.bat`，它会自动处理所有设置
- **日常使用**：如果虚拟环境已创建且依赖已安装，可使用 `run_windows_existvenv.bat` 快速启动
- **重新安装依赖**：使用 `run_windows.bat`

### Linux用户
- 使用 `run_linux.sh`，功能完整且自动化程度高

### 🌐 访问地址
所有脚本启动后，应用将在以下地址运行：
- **本地访问**: http://127.0.0.1:7860
- **自动打开**: 脚本会等待8秒后自动打开默认浏览器
- **深色主题**: 默认使用深色主题，提供更好的视觉体验

### 🎨 主题选项
- **深色主题**: http://127.0.0.1:7860/?__theme=dark （脚本默认）
- **浅色主题**: http://127.0.0.1:7860/?__theme=light
- **系统主题**: http://127.0.0.1:7860 （跟随系统设置）

### 🚀 启动流程
1. **双击运行脚本**
2. **查看中英文对照的启动信息**
3. **等待应用启动（约8秒）**
4. **浏览器自动打开深色主题界面**
5. **开始使用应用**
6. **按指定键安全退出**

## 注意事项

1. **Python环境要求**：
   - Windows: 确保系统已安装Python 3.7+
   - Linux/macOS: 确保系统已安装python3

2. **网络连接**：首次运行时需要网络连接来下载依赖包

3. **权限问题**：
   - Windows: 如果遇到权限问题，请以管理员身份运行
   - Linux: 确保对项目目录有读写权限

4. **虚拟环境**：脚本会自动在项目根目录创建 `.venv` 虚拟环境

5. **脚本选择**：
   - `run_windows.bat`: 完整功能，适合首次使用
   - `run_windows_existvenv.bat`: 快速启动，适合日常使用
   - `run_linux.sh`: Linux/macOS完整功能脚本

## 手动运行方式

如果自动脚本遇到问题，也可以手动执行以下步骤：

### Windows
```cmd
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
python gradio_app.py
```

### Linux/macOS
```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python gradio_app.py
```

## 故障排除

- **虚拟环境创建失败**：检查Python是否正确安装并添加到PATH
- **依赖安装失败**：检查网络连接，或尝试使用国内镜像源
- **程序启动失败**：检查gradio_app.py文件是否存在，以及相关配置文件是否正确